<html>
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://www.math.uwaterloo.ca/~pkates/LT3/jsdemos/popcornjs/popcorn.js"></script>
</html>
<body>
    <div class="video-container" id="container">
        <div class="video-container-inner">
            <div class="frame"></div>
            <div class="video-container-flip-item flipped" id="flip-item">
                <div class="video-container-box">
                    <video id="vid" poster="assets/images/thumbnail_1.png" playsinline>
                        <source src="https://github.com/dungba88/mewtzone/releases/download/video-1.0.0/wedding.mp4" type="video/mp4">
                    </video>
                    <img src="assets/images/play.webp" class="play" id="play">
                </div>
                <div class="info">
                    <div style="margin: 0 auto">
                        <p>
                            Kính mời <span id="guest">Quý Anh/Chị</span> đến dự tiệc cưới của
                        </p>
                        <p class="names">
                            Bùi Anh Dũng & Đặng Hoàng Ngân
                        </p>
                        <p class="address">
                            Vào hồi 11 giờ 00'
                            <br>
                            <i>THỨ SÁU, ngày 23 tháng 9, 2022</i>
                            <br>
                            <b>TẠI: TRỐNG ĐỒNG PALACE CẢNH HỒ</b>
                            <br>
                            173B Trường Chinh, Khương Mai, Quận Thanh Xuân, Hà Nội
                        </p>
                        <p class="action-items">
                            <span class="button" style="background-image: url(assets/images/maps.png)">
                                <a href="https://goo.gl/maps/HKofkGEhiU2wNcEZA" target="_blank">Xem bản đồ</a>
                            </span>
                            <span class="button" style="background-image: url(assets/images/calendar.png)">
                                <a href="https://calendar.google.com/event?action=TEMPLATE&tmeid=MzU5ZmJtYm82NW5ldGJiOWQyaDIxaGxhZDAgM205ZzFxdW5sdm5mMDhlaTBwZjZjMHAwN2tAZw&tmsrc=3m9g1qunlvnf08ei0pf6c0p07k%40group.calendar.google.com" target="_blank">Thêm vào lịch</a>
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const playBtn = document.getElementById("play");
        const vid = document.getElementById("vid");

        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        });

        const guest = decodeURIComponent(escape(atob(params.guest)));
        if (guest) {
            document.getElementById("guest").innerHTML = guest;
        }

        playBtn.addEventListener("click", (event) => {
            playBtn.classList.add("clicked");
            // request fullscreen in landscape mode
            if (window.innerHeight < window.innerWidth) {
                document.getElementById("container").requestFullscreen();
            }
            setTimeout(() => {
                vid.play();
                vid.setAttribute("controls", "controls");
            }, 750);
        });
        vid.addEventListener("ended", (event) => {
            document.getElementById("flip-item").classList.add("flipped");
        });
    </script>
</body>
